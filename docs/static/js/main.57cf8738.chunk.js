(window.webpackJsonpboard=window.webpackJsonpboard||[]).push([[0],{104:function(e,t){},110:function(e,t,r){},115:function(e,t,r){"use strict";r.r(t);var n,a=r(0),i=r.n(a),o=r(51),l=r.n(o),c=(r(66),r(52)),u=r(54),s=r(6),d=r(4),f=r(8),v=r(9),m=r(11);!function(e){e.Wild="Wild",e.Emerald="Emerald",e.Sapphire="Sapphire",e.Ruby="Ruby",e.Diamond="Diamond",e.Onyx="Onyx"}(n||(n={}));Object.freeze(Object.keys(n).filter(function(e){return"string"===typeof e}).map(function(e){return n[e]}));var p=Object.freeze(Object.keys(n).filter(function(e){return e!==n.Wild})),y=function(){function e(t){Object(s.a)(this,e),this.action=t}return Object(d.a)(e,[{key:"hash",value:function(){return JSON.stringify({name:this.__proto__.constructor.name,action:this.action})}}]),e}(),b=r(16),E="\n1,E,{A} & {B} & {B},0\n1,E,{A} & {A} & {C} & {C},0\n1,E,{C} & {C} & {C},0\n1,E,{A} & {B} & {C} & {D},0\n1,E,{A} & {C} & {C} & {D} & {D},0\n1,E,{A} & {B} & {C} & {D} & {D},0\n1,E,{D} & {D} & {D} & {D},1\n\n2,E,{D} & {D} & {D} & {A} & {A} & {B} & {B}, 1\n2,E,{E} & {E} & {C} & {C} & {C} & {B} & {B} & {B}, 1\n2,E,{B} & {B} & {B} & {B} & {D} & {A} & {A}, 2\n2,E,{B} & {B} & {B} & {B} & {B}, 2\n2,E,{B} & {B} & {B} & {B} & {B} & {A} & {A} & {A}, 2\n2,E,{E} & {E} & {E} & {E} & {E} & {E}, 3\n\n3,E,{C} & {C} & {C} & {D} & {D} & {D} & {A} & {A} & {A} & {B} & {B} & {B} & {B} & {B},3\n3,E,{A} & {A} & {A} & {A} & {A} & {A} & {A},4\n3,E,{A} & {A} & {A} & {A} & {A} & {A} & {E} & {E} & {E} & {B} & {B} & {B},4\n3,E,{A} & {A} & {A} & {A} & {A} & {A} & {A} & {E} & {E} & {E},5".split(/\n/).filter(function(e){return e&&e.length}).map(function(e){return e.split(",")}).map(function(e){var t=Object(b.a)(e,4);return{level:t[0],resourceType:t[1],cost:t[2],prestigePoints:t[3]}}),h=function(e,t){var r=t.reduce(function(e,t,r){return e[t]=p[r],e},{});return e.map(function(e){var n=e.cost,a=e.level,i=e.prestigePoints,o=e.resourceType;return{cost:g(n,t,r),level:a,prestigePoints:i,resourceType:r[o]}})},g=function(e,t,r){return t.reduce(function(e,t){return e.replace(new RegExp("{".concat(t,"}"),"g"),r[t])},e)},k=function(e){return e.filter(C).map(j)},C=function(e){return e&&!!e.cost&&P(e.level,1,3)&&O(e.resourceType)&&P(e.prestigePoints,0,10)},O=function(e){return Object.keys(n).indexOf(e)>-1},P=function(e,t,r){return n=Number(e),!Number.isNaN(n)&&n>=t&&n<=r;var n},j=function(e,t){var r=e.cost,a=e.level,i=e.prestigePoints,o=e.resourceType;return{id:"".concat(t,"_L").concat(a,"_").concat(o),level:Number(a),resourceType:n[o],cost:A(r),prestigePoints:Number(i)}},A=function(e){return(e||"").split("&").map(function(e){return e.trim()}).reduce(function(e,t){var r=t.endsWith("Card"),n=r?t.substr(0,t.length-"Card".length):t,a=e[r?"cards":"tokens"];return a[n]=(a[n]||0)+1,e},{cards:{},tokens:{}})},w=function(e){e.forEach(function(e){for(var t=0;t<e.visibleCards.length;t++)null==e.visibleCards[t]&&0!==e.stock.length&&(e.visibleCards[t]=e.stock.pop())})},D=function(e){for(var t,r,n=e.length;0!==n;)r=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[r],e[r]=t;return e},N=r(5),B=function(){return Object.keys(n).reduce(function(e,t){return e[t]=0,e},{})},T=function(e,t){var r=t&&t.cards||{},a=t&&t.tokens||{},i=e&&e.cards||{},o=e&&e.tokens||{},l=a[n.Wild]||0,c={cards:B(),tokens:B()},u=!0,s=!1,d=void 0;try{for(var f,v=p[Symbol.iterator]();!(u=(f=v.next()).done);u=!0){var m=f.value,y=r[m]||0,b=a[m]||0,E=i[m]||0,h=o[m]||0;if(E+h!==0){var g=h;g-=Math.min(g,y);var k=Math.min(g,b);g-=k;var C=Math.min(g,l);(g-=C)>0?c.tokens[m]=-g:(c.tokens[m]=(c.tokens[m]||0)+k,c.tokens[n.Wild]=(c.tokens[n.Wild]||0)+C,l-=C);var O=Math.max(0,E-y);c.cards[m]=(c.cards[m]||0)-O}}}catch(P){s=!0,d=P}finally{try{u||null==v.return||v.return()}finally{if(s)throw d}}return c},S=function(e,t){var r=t?T(e,t):e,n=x(r.cards),a=x(r.tokens);return!(n||a)},x=function(e){return null!=e&&Object.keys(e).some(function(t){return e[t]<0})},I=function(e,t){return Object.keys(t).reduce(function(e,r){return null!=e[r]?e[r]=e[r]+t[r]:e[r]=t[r],e},Object.assign({},e||{}))},M=function(e){return e.reduce(function(e,t){return e[t.resourceType]=(e[t.resourceType]||0)+1,e},{})},R=function(e){var t=W(e.players,e.currentPlayerId);if(null==t)throw new Error("Couldn't find current player");return t},W=function(e,t){return null==e?null:e.find(function(e){return e.id===t})},_=function(e,t){var r=R(e),n=!0,a=!1,i=void 0;try{for(var o,l=e.availableCards[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var c=o.value,u=function(e){return e&&e.id===t.id},s=u(c.stock[c.stock.length-1]),d=c.visibleCards.findIndex(u),f=d>-1;if(s)return c.stock.pop(),void r.reservedCards.push(t);if(f)return c.visibleCards[d]=null,void r.reservedCards.push(t)}}catch(v){a=!0,i=v}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}throw new Error("Couldn't find card ".concat(JSON.stringify(t)," in top card of stock piles or visible cards"))},G=function(e){function t(){return Object(s.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"execute",value:function(e){var t=!0,r=!1,n=void 0;try{for(var a,i=this.action.resources[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;e.availableTokens[o]=(e.availableTokens[o]||0)-1,R(e).tokens[o]=(R(e).tokens[o]||0)+1}}catch(l){r=!0,n=l}finally{try{t||null==i.return||i.return()}finally{if(r)throw n}}return e}}]),t}(y);G.getAvailableMoves=function(e){var t=p.filter(function(t){return e.availableTokens[t]>0}).map(function(e){return n[e]});if(t.length<3)return[];var r=[],a=!0,i=!1,o=void 0;try{for(var l,c=function(){var e=l.value,n=!0,a=!1,i=void 0;try{for(var o,c=function(){var n=o.value,a=!0,i=!1,l=void 0;try{for(var c,u=t.filter(function(t){return t!==e&&t!==n})[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var s=c.value;r.push([e,n,s])}}catch(d){i=!0,l=d}finally{try{a||null==u.return||u.return()}finally{if(i)throw l}}},u=t.filter(function(t){return t!==e})[Symbol.iterator]();!(n=(o=u.next()).done);n=!0)c()}catch(s){a=!0,i=s}finally{try{n||null==u.return||u.return()}finally{if(a)throw i}}},u=t[Symbol.iterator]();!(a=(l=u.next()).done);a=!0)c()}catch(s){i=!0,o=s}finally{try{a||null==u.return||u.return()}finally{if(i)throw o}}return r.map(function(e){return{move:"collectMultipleResources",args:[e]}})};var F=function(e){function t(){return Object(s.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"execute",value:function(e){e.availableTokens[this.action.resource]=(e.availableTokens[this.action.resource]||0)-2;var t=R(e);return t.tokens[this.action.resource]=(t.tokens[this.action.resource]||0)+2,e}}]),t}(y);F.getAvailableMoves=function(e){return p.filter(function(t){return e.availableTokens[t]>=2}).map(function(e){return n[e]}).map(function(e){return{move:"collectSingleResource",args:[e]}})};var L=function(e){function t(){return Object(s.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"execute",value:function(e){var r=this.action.card;if(null==r)throw new Error("Can't purchase an empty card!");var n=R(e),a=T(r.cost,function(e){var t=e.playedCards;return{tokens:e.tokens,cards:M(t)}}(n));if(!S(a))throw new Error(t.INSUFFICIENT_FUNDS);var i,o,l=e.availableCards.some(function(e){return e.visibleCards.some(function(e){return e&&e.id===r.id})}),c=n.reservedCards.find(function(e){return e.id===r.id});if(!c&&!l)throw new Error(t.UNAVAILABLE_CARD);if(n.tokens=(i=a.tokens,o=n.tokens,Object.keys(i).reduce(function(e,t){return null!=e[t]?e[t]=e[t]-i[t]:e[t]=-i[t],e},Object.assign({},o||{}))),e.availableTokens=I(e.availableTokens,a.tokens),l)_(e,r);else{if(!c)throw Error("Impossible situation");n.reservedCards.splice(n.reservedCards.indexOf(c),1)}return n.playedCards.push(r),n.prestigePoints=(n.prestigePoints||0)+r.prestigePoints,e}}]),t}(y);L.INSUFFICIENT_FUNDS="Player has insufficient funds to purchase this card",L.UNAVAILABLE_CARD="Card is not available to play",L.getAvailableMoves=function(e){var t=e.availableCards.flatMap(function(e){return e.visibleCards}),r=R(e).reservedCards,n=[].concat(Object(N.a)(t),Object(N.a)(r)).filter(function(e){return null!=e}),a=R(e),i={tokens:a.tokens,cards:M(a.playedCards)};return n.filter(function(e){return S(e.cost,i)}).map(function(e){return{move:"purchaseDevelopmentCard",args:[e]}})};var U=function(e){function t(){return Object(s.a)(this,t),Object(f.a)(this,Object(v.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"execute",value:function(e){var t=this.action.card;if(null==t)throw new Error("Can't reserve an empty card!");var r=R(e);return e.availableTokens.Wild>0&&(r.tokens.Wild=(r.tokens.Wild||0)+1,e.availableTokens.Wild=(e.availableTokens.Wild||0)-1),_(e,t),e}}]),t}(y);U.getAvailableMoves=function(e){return R(e).reservedCards.length>=4?[]:e.availableCards.flatMap(function(e){return e.visibleCards}).filter(function(e){return null!=e}).map(function(e){return{move:"reserveDevelopmentCard",args:[e]}})};var V=function(e,t,r,n){return new r(n).execute(e)},z={collectMultipleResources:function(e,t,r){return V(e,0,G,{resources:r})},collectSingleResource:function(e,t,r){return V(e,0,F,{resource:r})},purchaseDevelopmentCard:function(e,t,r){return V(e,0,L,{card:r})},reserveDevelopmentCard:function(e,t,r){return V(e,0,U,{card:r})}},J=Object(u.Game)({setup:function(e){var t=function(){var e=[["A","B","C","D","E"],["B","C","D","E","A"],["C","D","E","A","B"],["D","E","A","B","C"],["E","A","B","C","D"]].flatMap(function(e){return h(E,e)});return k(e)}();D(t);var r=[{level:3,stock:t.filter(function(e){return 3===e.level}),visibleCards:Array(4).fill(null)},{level:2,stock:t.filter(function(e){return 2===e.level}),visibleCards:Array(4).fill(null)},{level:1,stock:t.filter(function(e){return 1===e.level}),visibleCards:Array(4).fill(null)}];w(r);return{availableCards:r,availableTokens:{Wild:7,Emerald:5,Onyx:5,Ruby:5,Sapphire:5,Diamond:5},players:Array(e.numPlayers).fill(0).map(function(e,t){return{id:String(t),name:"Player ".concat(t+1),isHuman:!1,patrons:[],playedCards:[],tokens:{},prestigePoints:0,reservedCards:[],totalResources:{}}})}},moves:z,flow:{movesPerTurn:1,onTurnBegin:function(e,t){e.currentPlayerId=t.currentPlayer},onTurnEnd:function(e,t){w(e.availableCards)},endGameIf:function(e){var t=e.players.filter(function(e){return e.prestigePoints>=15});if(t.length)return{winner:t[0].id}}}});console.log("Moves: ".concat(J.moveNames));var H=r(127),Y=r(129),$=(r(110),r(128)),q=Object(H.a)(function(){return Object(Y.a)({container:{color:"#000",backgroundColor:"#fff",fontFamily:"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif",width:"calc(100% - 310px)",height:"100vh",display:"grid",gridColumnGap:5,gridRowGap:5,gridTemplateColumns:"auto 25%",gridTemplateRows:"7em auto 10em",gridTemplateAreas:'\n        "tokens    player-list"\n        "board     player-list"\n        "inventory player-list"'},tokens:{gridArea:"tokens",display:"flex",alignItems:"center",justifyContent:"space-around","& [itemProp='token']":{display:"flex",flexDirection:"column",fontSize:"350%"},"& [itemProp='token'] [itemProp='resource']":{},"& [itemProp='token'] [itemProp='count']":{position:"absolute",padding:".4em",fontSize:"60%",fontWeight:900},"& [itemprop='resource'][data-value='Onyx'] + [itemProp='count']":{color:"#fff"}},board:{gridArea:"board",padding:"0 1rem 0.5rem"},playerList:{display:"flex",flexDirection:"column",alignContent:"center",gridArea:"player-list",backgroundColor:"#fff",padding:"0.4em"},inventory:{gridArea:"inventory"}})}),K=function(e){var t=e.G,r=t.availableCards,o=t.availableTokens,l=t.currentPlayerId,c=t.players,u=e.moves,s=q({}),d=Object(a.useState)([]),f=Object(b.a)(d,2),v=f[0],m=f[1],p=c[l],y=p,E=Object(a.useCallback)(function(e){if(e!==n.Wild){var t=v;v.indexOf(e)>-1?1===v.length?(u.collectSingleResource(e),t=[]):console.debug("Ignoring invalid duplicate selection of ".concat(e)):t=[].concat(Object(N.a)(v),[e]),3===t.length&&(u.collectMultipleResources(t),t=[]),m(t)}else console.debug("Ignoring invalid selection of a wild token")},[u,v]);return i.a.createElement("div",{id:"container",className:s.container},i.a.createElement("div",{className:s.tokens},Object.keys(o).map(function(e){return i.a.createElement("div",{key:e,itemProp:"token",onClick:function(){return E(e)}},i.a.createElement("div",{itemProp:"resource","data-value":e}),i.a.createElement("div",{itemProp:"count","data-value":o[e]}))})),i.a.createElement("div",{id:"board",className:s.board},r.map(function(e,t){return i.a.createElement("div",{key:String(t),className:"cardRow"},i.a.createElement("div",{className:"stock card valid-action",onClick:function(){return!!e.stock.length&&u.reserveDevelopmentCard(e.stock[e.stock.length-1])}},i.a.createElement("span",null,e.stock.length)),Array(4).fill(0).map(function(t,r){return e.visibleCards[r]||{id:null}}).map(function(t,r){return i.a.createElement(Q,{key:t.id||"".concat(e.level).concat(r),card:t,onSelected:function(){return u.reserveDevelopmentCard(t)}})}))})),i.a.createElement("div",{id:"player-list",className:s.playerList},c.map(function(e){return i.a.createElement(X,{key:e.id,isCurrentPlayer:e===p,player:e})}),i.a.createElement("div",{className:"patronRow"},i.a.createElement("div",{className:"patron card"},i.a.createElement("span",null,"Patron")),i.a.createElement("div",{className:"patron card"},i.a.createElement("span",null,"Patron")),i.a.createElement("div",{className:"patron card"},i.a.createElement("span",null,"Patron")),i.a.createElement("div",{className:"patron card"},i.a.createElement("span",null,"Patron")),i.a.createElement("div",{className:"patron card"},i.a.createElement("span",null,"Patron")))),i.a.createElement("div",{id:"inventory",className:s.inventory},i.a.createElement(ee,{player:y,onPlayReservedCard:function(e){return u.purchaseDevelopmentCard(e)}})))},Q=function(e){var t=e.card,r=e.onSelected;return i.a.createElement("div",{className:"card ".concat(t.id?"valid-action":""),itemProp:"card",onClick:function(){return!!t.id&&r(t)}},i.a.createElement("div",{itemProp:"resource","data-value":t.resourceType}),t&&t.prestigePoints>0&&i.a.createElement("div",{itemProp:"prestigePoints","data-value":t.prestigePoints}),i.a.createElement("div",{itemProp:"cost"},t&&t.cost&&Object.keys(t.cost.tokens).map(function(e){return i.a.createElement("div",{key:e,itemProp:"token"},i.a.createElement("div",{itemProp:"resource","data-value":e}),i.a.createElement("div",{itemProp:"count","data-value":t.cost.tokens[e]}))})))},X=function(e){var t=e.isCurrentPlayer,r=e.player;return i.a.createElement("div",{className:"player ".concat(t&&"active"),itemScope:!0,itemType:"urn:x:player",itemID:String(r.id)},i.a.createElement("div",{itemProp:"name"},r.name," ",t&&i.a.createElement("span",{dangerouslySetInnerHTML:{__html:"&Star;"}})),i.a.createElement("div",{itemProp:"prestigePoints"},r.prestigePoints),i.a.createElement("div",{className:"inventory"},i.a.createElement(Z,{player:r})))},Z=function(e){var t=e.player,r=t.playedCards,n=t.reservedCards,a=t.tokens;return i.a.createElement("div",{itemProp:"inventory"},i.a.createElement("div",{className:"cards"},i.a.createElement("div",{className:"subtitle"},"Reserved Cards"),i.a.createElement("div",{itemProp:"card-count","data-value":n.length})),i.a.createElement("div",{className:"cards"},i.a.createElement("div",{className:"subtitle"},"Played Cards"),i.a.createElement("div",{itemProp:"card-count","data-value":r.length})),i.a.createElement("div",{className:"tokens"},i.a.createElement("div",{className:"subtitle"},"Tokens"),Object.keys(a).map(function(e){return i.a.createElement("div",{key:e,itemProp:"token"},i.a.createElement("div",{itemProp:"resource","data-value":e}),i.a.createElement("div",{itemProp:"count","data-value":a[e]}))})))},ee=function(e){var t=e.player,r=e.onPlayReservedCard;return i.a.createElement($.a,{display:"flex",flexDirection:"row"},t.reservedCards.map(function(e){return i.a.createElement(Q,{key:e.id,card:e,onSelected:r})}))},te=r(12),re=r(36),ne=r(59);function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var ie=function(e,t){return{weight:0,checker:function(r){var n=t(r);return this.weight=n*e,this.weight>0}}},oe=function(e){function t(e){return Object(s.a)(this,t),Object(f.a)(this,Object(v.a)(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(r,!0).forEach(function(t){Object(te.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e,{iterations:100,playoutDepth:100,objectives:function(e,t,r){if(!r)return{};var n=W(e.players,r);return{winGame:ie(Number.POSITIVE_INFINITY,function(e){return W(e.players,r).prestigePoints>=15?1:0}),increasePrestigePoints:ie(50,function(e){return W(e.players,r).prestigePoints-n.prestigePoints})}}})))}return Object(m.a)(t,e),t}(re.MCTSBot),le=Object(re.AI)({bot:oe,enumerate:function(e){return[G,F,L,U].flatMap(function(t){return t.getAvailableMoves(e)})},visualize:Object(ne.MCTSVisualizer)(function(e){var t=e.G,r=R(t);return null==r?null:i.a.createElement("div",{style:{transform:"scale(0.4)"}},i.a.createElement("table",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Prestige"),i.a.createElement("td",null,r.prestigePoints)),i.a.createElement("tr",null,i.a.createElement("th",null,"Cards"),i.a.createElement("td",null,"P: ",r.playedCards," | R: ",r.reservedCards)),i.a.createElement("tr",null,i.a.createElement("th",null,"Tokens"),i.a.createElement("td",null,Object.keys(r.tokens).reduce(function(e,t){return e+r.tokens[t]},0)))))})}),ce=r(24),ue=Object(ce.a)(function(e){var t=e.settings,r=Object(c.Client)({game:J,board:K,ai:le,numPlayers:t.numberOfPlayers,multiplayer:t.multiplayer,debug:t.debug});return i.a.createElement(r,null)}),se=Object(ce.a)(function(){return i.a.createElement(ue,{settings:{numberOfPlayers:2,musicVolume:0,sfxVolume:0,players:[]}})});se.displayName="SplendidGame";var de=se;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(function(){return i.a.createElement(de,null)},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},61:function(e,t,r){e.exports=r(115)},66:function(e,t,r){}},[[61,1,2]]]);
//# sourceMappingURL=main.57cf8738.chunk.js.map